<!DOCTYPE html>

<html>
    <head>
        <script type="text/javascript" src="akihabara/gbox.js"></script>
        <script type="text/javascript" src="akihabara/iphopad.js"></script>
        <script type="text/javascript" src="akihabara/trigo.js"></script>
        <script type="text/javascript" src="akihabara/toys.js"></script>
        <script type="text/javascript" src="akihabara/help.js"></script>
        <script type="text/javascript" src="akihabara/tool.js"></script>
        <script type="text/javascript" src="akihabara/gamecycle.js"></script>
        <style>BODY { -webkit-user-select: none; margin: 0px }</style>
        <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" />
        
    </head>
    <body> 
        
    </body>
    <script>
            var maingame;
            window.addEventListener('load',loadResources,false);

            function loadResources() {
                help.akihabaraInit('8by5');
                gbox.addImage('font', 'font.png');
                gbox.addImage('logo', 'logo.png');
                gbox.addFont({id:'small',image:'font', firstletter: ' ', tileh: 8, tilew: 8, tilerow: 255, gapx: 0, gapy:0 });
                gbox.loadAll(main);
            }

            function main() {
                gbox.setGroups(['game']);
                maingame = gamecycle.createMaingame('game', 'game');
                
                maingame.gameTitleIntroAnimation = function(reset) {
                    if(reset) {
                        toys.resetToy(this, 'rising');
                    }

                    gbox.blitFade(gbox.getBufferContext(),{ alpha: 1});

                    toys.logos.linear(this, 'rising', {
                        image: 'logo',
                        sx: gbox.getScreenW()/2-gbox.getImage('logo').width/2,
                        sy: gbox.getScreenH(),
                        x:  gbox.getScreenW()/2-gbox.getImage('logo').width/2,
                        y:  20,
                        speed: 2
                    });

                    maingame.pressStartIntroAnimation = function(reset) {
                        if(reset) {
                            toys.resetToy(this,"default-blinker");
                        }else {
                            toys.text.blink(this,"default-blinker",gbox.getBufferContext(),{font:"small",text:"PRESS Z TO START",valign:gbox.ALIGN_MIDDLE,halign:gbox.ALIGN_CENTER,dx:0,dy:Math.floor(gbox.getScreenH()/3),dw:gbox.getScreenW(),dh:Math.floor(gbox.getScreenH()/3)*2,blinkspeed:10});
                            return gbox.keyIsHit("a");
                        }
                    }
                }
                
                gbox.go();
            }
        </script>       
</html>
